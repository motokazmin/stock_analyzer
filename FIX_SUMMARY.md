# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `python main.py update` —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–∞–ª–∞ **1277 –∑–∞–ø–∏—Å–µ–π –≤–º–µ—Å—Ç–æ 2-3**.

–õ–æ–≥ –ø–æ–∫–∞–∑—ã–≤–∞–ª:
```
–ü–æ—Å–ª–µ–¥–Ω—è—è –¥–∞—Ç–∞ –¥–ª—è OZON: 2025-11-12
–ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å 2025-11-13
–ó–∞–≥—Ä—É–∂–µ–Ω–æ 100 –∑–∞–ø–∏—Å–µ–π (–ø–æ–∑–∏—Ü–∏—è 0)
–ó–∞–≥—Ä—É–∂–µ–Ω–æ 100 –∑–∞–ø–∏—Å–µ–π (–ø–æ–∑–∏—Ü–∏—è 100)
...
–ó–∞–≥—Ä—É–∂–µ–Ω–æ 77 –∑–∞–ø–∏—Å–µ–π (–ø–æ–∑–∏—Ü–∏—è 1200)
–ó–∞–≥—Ä—É–∂–µ–Ω–æ 0 –∑–∞–ø–∏—Å–µ–π
–ù–µ—Ç –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è OZON ‚ùå
```

## üîç –ü—Ä–∏—á–∏–Ω—ã

1. **API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä `from_date`**
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã API: —Ç–æ–ª—å–∫–æ `start` (–ø–æ–∑–∏—Ü–∏—è) –∏ `limit` (—Ä–∞–∑–º–µ—Ä –ø–∞—Ä—Ç–∏–∏)
   - –°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–∞–ª–∞ –í–°–ï –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (~1277 –∑–∞–ø–∏—Å–µ–π)

2. **–§–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç "–ø—É—Å—Ç—ã–µ" –¥–Ω–∏**
   - –î–Ω–∏ –±–µ–∑ —Ç–æ—Ä–≥–æ–≤–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏ —Å VOLUME = 0
   - –ü—Ä–∏–º–µ—Ä: 2025-09-23 –¥–æ 2025-10-02 - –≤—Å–µ –Ω—É–ª–∏
   - –ü–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –¥–∞—Ç–µ >= 2025-11-13, –¥–∞–Ω–Ω—ã—Ö –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –¥–Ω–µ–π

```python
# stock_data_manager.py —Å—Ç—Ä–æ–∫–∞ 210-212
df = df[df['VOLUME'] > 0]
logger.info(f"–ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –¥–Ω–µ–π –±–µ–∑ —Ç–æ—Ä–≥–æ–≤–ª–∏: {len(df)} –∑–∞–ø–∏—Å–µ–π")
```

### 2. –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

```python
# –¢–µ–ø–µ—Ä—å –≤–∏–¥–Ω–æ —Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π —É–¥–∞–ª–∏–ª–æ—Å—å –ø—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
logger.info(f"–ü–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞ –ø–æ –¥–∞—Ç–µ >= {from_date}: {len(df)} –∑–∞–ø–∏—Å–µ–π (–±—ã–ª–æ {before_filter})")
```

### 3. –û—á–∏—â–µ–Ω CSV —Ñ–∞–π–ª OZON

–£–¥–∞–ª–µ–Ω—ã –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ —Å VOLUME = 0:
- –ë—ã–ª–æ: 257 —Å—Ç—Ä–æ–∫
- –°—Ç–∞–ª–æ: –ø—Ä–∏–º–µ—Ä–Ω–æ 220 —Å—Ç—Ä–æ–∫ (—Ç–æ–ª—å–∫–æ –¥–Ω–∏ —Å —Ç–æ—Ä–≥–æ–≤–ª–µ–π)

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∫ –æ–±—ã—á–Ω–æ:

```bash
python main.py update
```

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞:
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–Ω–∏ —Å —Ç–æ—Ä–≥–æ–≤–ª–µ–π
- ‚úÖ –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ –¥–∞—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤ –ª–æ–≥–µ —Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞
- ‚úÖ –ù–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ª–∏—à–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ

## üìù –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è)

```
1. –ü—Ä–æ—á–∏—Ç–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –¥–∞—Ç—É –∏–∑ CSV
   ‚îî‚îÄ OZON: 2025-11-12
   
2. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å (last_date + 1) –¥–µ–Ω—å
   ‚îî‚îÄ from_date = 2025-11-13
   
3. API –≤–µ—Ä–Ω—É–ª –í–°–ï –¥–∞–Ω–Ω—ã–µ (1277 –∑–∞–ø–∏—Å–µ–π)
   ‚îú‚îÄ –≠—Ç–æ –¥–∞–Ω–Ω—ã–µ –∑–∞ –≤–µ—Å—å –ø–µ—Ä–∏–æ–¥ –∏—Å—Ç–æ—Ä–∏–∏
   ‚îî‚îÄ –ù–∞—á–∏–Ω–∞—è —Å 2025-09-18
   
4. –£–¥–∞–ª–∏—Ç—å –¥–Ω–∏ –±–µ–∑ —Ç–æ—Ä–≥–æ–≤–ª–∏ (VOLUME = 0)
   ‚îú‚îÄ –ë—ã–ª–æ: 1277 –∑–∞–ø–∏—Å–µ–π
   ‚îú‚îÄ –£–¥–∞–ª–µ–Ω–æ: ~1000 (–¥–Ω–∏ –±–µ–∑ —Ç–æ—Ä–≥–æ–≤–ª–∏)
   ‚îî‚îÄ –û—Å—Ç–∞–ª–æ—Å—å: ~250 (—Ç–æ–ª—å–∫–æ —Å —Ç–æ—Ä–≥–æ–≤–ª–µ–π)
   
5. –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ >= 2025-11-13
   ‚îú‚îÄ –ë—ã–ª–æ: ~250 –∑–∞–ø–∏—Å–µ–π
   ‚îú‚îÄ –û—Å—Ç–∞–ª–æ—Å—å: 0-2 (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–Ω—è —Ç–æ—Ä–≥–æ–≤–ª–∏)
   ‚îî‚îÄ –†–µ–∑—É–ª—å—Ç–∞—Ç: –Ω–µ—Ç –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–æ–∂–∏–¥–∞–µ—Ç—Å—è)
   
6. –ï—Å–ª–∏ –Ω–µ—Ç –Ω–æ–≤—ã—Ö ‚Üí –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ–º —Ñ–∞–π–ª ‚úÖ
```

## üí° –ü–æ—á–µ–º—É —Ç–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?

API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–∏—Å—Ç–æ—Ä–∏—é –≤—Å–µ—Ö —Ç–æ—Ä–≥–æ–≤**, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –¥–Ω–∏ —Å —Ç–æ—Ä–≥–æ–≤–ª–µ–π:
- –î–Ω–∏ —Ç–æ—Ä–≥–æ–≤–ª–∏ ‚Üí DATA —Å –æ–±—ä–µ–º–æ–º
- –î–Ω–∏ –±–µ–∑ —Ç–æ—Ä–≥–æ–≤–ª–∏ (–≤—ã—Ö–æ–¥–Ω—ã–µ, –ø—Ä–∞–∑–¥–Ω–∏–∫–∏) ‚Üí –¥–∞–Ω–Ω—ã–µ —Å VOLUME = 0

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ - —Å–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å —ç—Ç–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç!

## üß™ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –ª–æ–≥–∞–º–∏
python main.py update 2>&1 | grep -E "OZON|–ü–æ—Å–ª–µ|–ó–∞–≥—Ä—É–∂–µ–Ω–æ"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Ñ–∞–π–ª–∞
python3 << 'EOF'
import pandas as pd
df = pd.read_csv("stock_data/OZON_full.csv")
print(f"–ó–∞–ø–∏—Å–µ–π: {len(df)}")
print(f"–î–∏–∞–ø–∞–∑–æ–Ω: {df['DATE'].min()} ‚Üí {df['DATE'].max()}")
print(f"–¢–æ–ª—å–∫–æ —Å —Ç–æ—Ä–≥–æ–≤–ª–µ–π (VOLUME > 0): {(df['VOLUME'] > 0).sum()}")
EOF
```

