# üìä –°–∏—Å—Ç–µ–º–∞ –ê—É–¥–∏—Ç–∞ –¢–æ—Ä–≥–æ–≤—ã—Ö –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

## üéØ –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø—É—Ç—ë–º —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

### –ú–æ–¥—É–ª–∏:

1. **`audit_manager.py`** ‚Äî –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
   - –ó–∞–≥—Ä—É–∑–∫–∞/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (JSON)
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
   - –†–∞—Å—á—ë—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

2. **`audit_report_generator.py`** ‚Äî –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä HTML –æ—Ç—á—ë—Ç–æ–≤
   - –°–æ–∑–¥–∞–Ω–∏–µ –∫—Ä–∞—Å–∏–≤—ã—Ö –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –æ—Ç—á—ë—Ç–æ–≤
   - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
   - –í—ã–≤–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –º–µ—Ç—Ä–∏–∫

3. **`main.py` (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)** ‚Äî –ù–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞
   - `python main.py audit` ‚Äî –∑–∞–ø—É—Å–∫ –∞—É–¥–∏—Ç–∞

## üíæ –î–∞–Ω–Ω—ã–µ

### `recommendations_archive.json`
–ê—Ä—Ö–∏–≤ –≤—Å–µ—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:
```json
{
  "recommendations": [
    {
      "date": "2025-11-15T10:30:00",
      "ticker": "SBER",
      "signal": "BUY",
      "entry_price": 297.44,
      "target1": 324.97,
      "target2": 349.02,
      "stop_loss": 276.88,
      "rsi": 68.96,
      "trend": "UP",
      "comment": "–í–æ—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–µ–Ω–¥",
      "status": "ACTIVE",  // ACTIVE, COMPLETED, FAILED, PENDING
      "result": null
    }
  ]
}
```

### `analysis_history/`
–ü–∞–ø–∫–∞ —Å HTML –æ—Ç—á—ë—Ç–∞–º–∏:
```
analysis_history/
‚îú‚îÄ‚îÄ AUDIT_REPORT_20251115_103000.html
‚îú‚îÄ‚îÄ AUDIT_REPORT_20251115_143000.html
‚îî‚îÄ‚îÄ ...
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1Ô∏è‚É£ –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –≤ –∞—Ä—Ö–∏–≤

–ò–∑ Python –∫–æ–¥–∞:
```python
from audit_manager import AuditManager

audit = AuditManager()
audit.add_recommendation(
    ticker="SBER",
    signal="BUY",
    entry_price=297.44,
    target1=324.97,
    target2=349.02,
    stop_loss=276.88,
    rsi=68.96,
    trend="UP",
    comment="–í–æ—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–µ–Ω–¥"
)
```

### 2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

–ò–∑ CLI:
```bash
python main.py audit
```

–í—ã–≤–µ–¥–µ—Ç:
```
============================================================
üìä –ê–£–î–ò–¢ –¢–û–†–ì–û–í–´–• –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ô
============================================================

üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏...

‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π: 5

‚úÖ SBER: TARGET1_HIT (+5.10%)
‚ùå GAZP: STOPPED_OUT (-2.30%)
‚è≥ LKOH: IN_PROGRESS (+1.20%)
‚úÖ NVTK: TARGET2_HIT (+12.50%)
üü° TATN: IN_PROGRESS (+3.40%)

üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
  –í—Å–µ–≥–æ: 5
  –í—ã–ø–æ–ª–Ω–µ–Ω–æ: 2
  –ü—Ä–æ–≤–∞–ª–µ–Ω–æ: 1
  –ê–∫—Ç–∏–≤–Ω–æ: 2
  –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: 40.0%
  –°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: +3.78%

üìÑ –°–æ–∑–¥–∞—ë–º HTML –æ—Ç—á—ë—Ç...
‚úÖ –û—Ç—á—ë—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω: analysis_history/AUDIT_REPORT_20251115_103000.html
```

### 3Ô∏è‚É£ –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å HTML –æ—Ç—á—ë—Ç

–û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª `analysis_history/AUDIT_REPORT_*.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

## üìä –ú–µ—Ç—Ä–∏–∫–∏

### –°—Ç–∞—Ç—É—Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- **ACTIVE** ‚Äî –∞–∫—Ç–∏–≤–Ω–∞—è, –µ—â—ë –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
- **COMPLETED** ‚Äî —Ü–µ–ª—å 2 –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞ ‚úÖ
- **FAILED** ‚Äî —Å—Ç–æ–ø-–ª–æ—Å—Å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω ‚ùå
- **PENDING** ‚Äî –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- **TARGET1_HIT** ‚Äî —Ü–µ–ª—å 1 –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞ (50% –ø—Ä–æ—Ñ–∏—Ç–∞)
- **TARGET2_HIT** ‚Äî —Ü–µ–ª—å 2 –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞ (100% –ø—Ä–æ—Ñ–∏—Ç–∞)
- **STOPPED_OUT** ‚Äî —Å—Ç–æ–ø-–ª–æ—Å—Å (—É–±—ã—Ç–æ–∫)
- **IN_PROGRESS** ‚Äî –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **–í—Å–µ–≥–æ** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- **–í—ã–ø–æ–ª–Ω–µ–Ω–æ** ‚Äî –¥–æ—Å—Ç–∏–≥–ª–∏ —Ü–µ–ª–∏ 2
- **–ü—Ä–æ–≤–∞–ª–µ–Ω–æ** ‚Äî –ø–æ–ø–∞–ª–∏ –≤ —Å—Ç–æ–ø
- **–ê–∫—Ç–∏–≤–Ω–æ** ‚Äî –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å %** ‚Äî (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ / (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ + –ø—Ä–æ–≤–∞–ª–µ–Ω–æ)) * 100
- **–°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç %** ‚Äî —Å—Ä–µ–¥–Ω–∏–π –ø—Ä–æ—Ñ–∏—Ç/—É–±—ã—Ç–æ–∫ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö
- **–ú–∞–∫—Å–∏–º—É–º %** ‚Äî –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- **–ú–∏–Ω–∏–º—É–º %** ‚Äî —Ö—É–¥—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å HTML –æ—Ç—á—ë—Ç–∞–º–∏

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ (‚Üí `main.py analyze`), —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤:

```python
# –í report_generator.py –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
from audit_manager import AuditManager

audit = AuditManager()
for recommendation in all_recommendations:
    audit.add_recommendation(
        ticker=recommendation['ticker'],
        signal=recommendation['signal'],
        entry_price=recommendation['entry_price'],
        target1=recommendation['target1'],
        target2=recommendation['target2'],
        stop_loss=recommendation['stop_loss'],
        rsi=recommendation['rsi'],
        trend=recommendation['trend'],
        comment=recommendation.get('comment', '')
    )
```

## üìà –ü—Ä–∏–º–µ—Ä HTML –æ—Ç—á—ë—Ç–∞

–û—Ç—á—ë—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:

### –ó–∞–≥–æ–ª–æ–≤–æ–∫
- –î–∞—Ç–∞ –æ—Ç—á—ë—Ç–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (—Å–≤–µ—Ä—Ö—É)
- ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
- ‚ùå –ü—Ä–æ–≤–∞–ª–µ–Ω–æ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
- üü° –ê–∫—Ç–∏–≤–Ω–æ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
- üìà –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞
- üí∞ –°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- üéØ –ú–∞–∫—Å–∏–º—É–º
- üéØ –ú–∏–Ω–∏–º—É–º

### –¢—Ä–∏ —Å–µ–∫—Ü–∏–∏:
1. **‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** ‚Äî —Å –∑–µ–ª—ë–Ω—ã–º–∏ –±–µ–π–¥–∂–∞–º–∏
2. **üü° –ê–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** ‚Äî —Å –∂—ë–ª—Ç—ã–º–∏ –±–µ–π–¥–∂–∞–º–∏
3. **‚ùå –ü—Ä–æ–≤–∞–ª–µ–Ω—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** ‚Äî —Å –∫—Ä–∞—Å–Ω—ã–º–∏ –±–µ–π–¥–∂–∞–º–∏

### –î–ª—è –∫–∞–∂–¥–æ–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- –¢–∏–∫–µ—Ä + —Å—Ç–∞—Ç—É—Å + —Ä–µ–∑—É–ª—å—Ç–∞—Ç %
- –î–∞—Ç–∞, —Å–∏–≥–Ω–∞–ª, —Ü–µ–Ω–∞ –≤—Ö–æ–¥–∞
- –¶–µ–ª–∏ 1/2, —Å—Ç–æ–ø-–ª–æ—Å—Å
- RSI –∏ —Ç—Ä–µ–Ω–¥
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```bash
# –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 19:00:
python main.py update && python main.py analyze && python main.py audit
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç
```bash
# –ö–∞–∂–¥—É—é –ø—è—Ç–Ω–∏—Ü—É:
python main.py audit > audit_report_$(date +%Y%m%d).txt
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–¥–Ω–æ–π –∞–∫—Ü–∏–∏
```python
from audit_manager import AuditManager

audit = AuditManager()
results = audit.audit_all()

sber_results = [r for r in results if r['ticker'] == 'SBER']
for result in sber_results:
    print(f"SBER: {result['status']} ({result['result_pct']:+.2f}%)")
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞–ø–∫–∏ –∞—Ä—Ö–∏–≤–∞
```python
audit = AuditManager(archive_file="my_archive.json")
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞–ø–∫–∏ –æ—Ç—á—ë—Ç–æ–≤
```python
generator = AuditReportGenerator(output_folder="my_reports")
```

### –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ
```python
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é
recent = [r for r in audit.archive['recommendations'] 
          if (datetime.now() - pd.to_datetime(r['date'])).days <= 7]
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

–ö–∞–∂–¥—ã–π HTML –æ—Ç—á—ë—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é, –ø–æ—ç—Ç–æ–º—É –≤—ã –º–æ–∂–µ—Ç–µ:
- –°–º–æ—Ç—Ä–µ—Ç—å —Ç—Ä–µ–Ω–¥ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ Ô∏èüìà
- –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫–∏–µ —Å–∏–≥–Ω–∞–ª—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ª—É—á—à–µ
- –û–ø—Ä–µ–¥–µ–ª—è—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞
- –£–ª—É—á—à–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ê—Ä—Ö–∏–≤ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** ‚Äî –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤–ª—è—Ç—å
2. **–î–∞–Ω–Ω—ã–µ –∏–∑ CSV** ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
3. **–°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è** ‚Äî –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∞—É–¥–∏—Ç–µ
4. **HTML –æ—Ç—á—ë—Ç—ã** ‚Äî —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º
5. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç—Å—è** ‚Äî –ø–æ –≤—Å–µ–º—É –∞—Ä—Ö–∏–≤—É, –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–µ–º—É –ø–µ—Ä–∏–æ–¥—É

## üìû –ö–æ–º–∞–Ω–¥—ã

```bash
python main.py audit              # –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞—É–¥–∏—Ç –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
python main.py update             # –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è –∞—É–¥–∏—Ç–∞)
python main.py analyze            # –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
python main.py status             # –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å, –≤–∫–ª—é—á–∞—è –∞—É–¥–∏—Ç
```

---

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

